<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A MODERN DIVE into Data with R</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Getting away from the traditional introductory statistics curriculum, more focused on reproducible research and modern data analysis techniques and tools">
  <meta name="generator" content="bookdown 0.1.4 and GitBook 2.6.7">

  <meta property="og:title" content="A MODERN DIVE into Data with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Getting away from the traditional introductory statistics curriculum, more focused on reproducible research and modern data analysis techniques and tools" />
  <meta name="github-repo" content="ismayc/moderndiver-source" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A MODERN DIVE into Data with R" />
  
  <meta name="twitter:description" content="Getting away from the traditional introductory statistics curriculum, more focused on reproducible research and modern data analysis techniques and tools" />
  

<meta name="author" content="Chester Ismay">

<meta name="date" content="2016-08-30">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="6-infer-basics.html">
<link rel="next" href="8-ci.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.7/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/dygraphs-binding-1.1.1.1/dygraphs.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#colophon"><i class="fa fa-check"></i><b>1.1</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-intro.html"><a href="2-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="2-intro.html"><a href="2-intro.html#preamble"><i class="fa fa-check"></i><b>2.1</b> Preamble</a></li>
<li class="chapter" data-level="2.2" data-path="2-intro.html"><a href="2-intro.html#two-driving-data-sources"><i class="fa fa-check"></i><b>2.2</b> Two driving data sources</a></li>
<li class="chapter" data-level="2.3" data-path="2-intro.html"><a href="2-intro.html#datascience-pipeline"><i class="fa fa-check"></i><b>2.3</b> Data/science pipeline</a></li>
<li class="chapter" data-level="2.4" data-path="2-intro.html"><a href="2-intro.html#reproducibility"><i class="fa fa-check"></i><b>2.4</b> Reproducibility</a></li>
<li class="chapter" data-level="2.5" data-path="2-intro.html"><a href="2-intro.html#who-is-this-book-for"><i class="fa fa-check"></i><b>2.5</b> Who is this book for?</a></li>
</ul></li>
<li class="part"><span><b>Data Exploration</b></span></li>
<li class="chapter" data-level="3" data-path="3-tidy.html"><a href="3-tidy.html"><i class="fa fa-check"></i><b>3</b> Tidy data</a><ul>
<li class="chapter" data-level="3.1" data-path="3-tidy.html"><a href="3-tidy.html#what-is-tidy-data"><i class="fa fa-check"></i><b>3.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="3.2" data-path="3-tidy.html"><a href="3-tidy.html#the-nycflights13-datasets"><i class="fa fa-check"></i><b>3.2</b> The <code>nycflights13</code> datasets</a></li>
<li class="chapter" data-level="3.3" data-path="3-tidy.html"><a href="3-tidy.html#how-is-flights-tidy"><i class="fa fa-check"></i><b>3.3</b> How is <code>flights</code> tidy?</a></li>
<li class="chapter" data-level="3.4" data-path="3-tidy.html"><a href="3-tidy.html#normal-forms-of-data"><i class="fa fa-check"></i><b>3.4</b> Normal forms of data</a></li>
<li class="chapter" data-level="3.5" data-path="3-tidy.html"><a href="3-tidy.html#whats-to-come"><i class="fa fa-check"></i><b>3.5</b> What’s to come?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-viz.html"><a href="4-viz.html"><i class="fa fa-check"></i><b>4</b> Visualizing Data</a><ul>
<li class="chapter" data-level="4.1" data-path="4-viz.html"><a href="4-viz.html#five-named-graphs---the-fng"><i class="fa fa-check"></i><b>4.1</b> Five Named Graphs - The FNG</a></li>
<li class="chapter" data-level="4.2" data-path="4-viz.html"><a href="4-viz.html#histograms"><i class="fa fa-check"></i><b>4.2</b> Histograms</a><ul>
<li class="chapter" data-level="4.2.1" data-path="4-viz.html"><a href="4-viz.html#contsum"><i class="fa fa-check"></i><b>4.2.1</b> Continuous data summaries</a></li>
<li class="chapter" data-level="4.2.2" data-path="4-viz.html"><a href="4-viz.html#summary"><i class="fa fa-check"></i><b>4.2.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4-viz.html"><a href="4-viz.html#boxplots"><i class="fa fa-check"></i><b>4.3</b> Boxplots</a><ul>
<li class="chapter" data-level="4.3.1" data-path="4-viz.html"><a href="4-viz.html#faceting"><i class="fa fa-check"></i><b>4.3.1</b> Faceting</a></li>
<li class="chapter" data-level="4.3.2" data-path="4-viz.html"><a href="4-viz.html#summary-1"><i class="fa fa-check"></i><b>4.3.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="4-viz.html"><a href="4-viz.html#barplots"><i class="fa fa-check"></i><b>4.4</b> Barplots</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-viz.html"><a href="4-viz.html#must-avoid-pie-charts"><i class="fa fa-check"></i><b>4.4.1</b> Must avoid pie charts!</a></li>
<li class="chapter" data-level="4.4.2" data-path="4-viz.html"><a href="4-viz.html#using-barplots-to-compare-two-variables"><i class="fa fa-check"></i><b>4.4.2</b> Using barplots to compare two variables</a></li>
<li class="chapter" data-level="4.4.3" data-path="4-viz.html"><a href="4-viz.html#summary-2"><i class="fa fa-check"></i><b>4.4.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-viz.html"><a href="4-viz.html#scatter-plots"><i class="fa fa-check"></i><b>4.5</b> Scatter-plots</a><ul>
<li class="chapter" data-level="4.5.1" data-path="4-viz.html"><a href="4-viz.html#jittering"><i class="fa fa-check"></i><b>4.5.1</b> Jittering</a></li>
<li class="chapter" data-level="4.5.2" data-path="4-viz.html"><a href="4-viz.html#setting-transparency"><i class="fa fa-check"></i><b>4.5.2</b> Setting transparency</a></li>
<li class="chapter" data-level="4.5.3" data-path="4-viz.html"><a href="4-viz.html#summary-3"><i class="fa fa-check"></i><b>4.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="4-viz.html"><a href="4-viz.html#line-graphs"><i class="fa fa-check"></i><b>4.6</b> Line-graphs</a><ul>
<li class="chapter" data-level="4.6.1" data-path="4-viz.html"><a href="4-viz.html#summary-4"><i class="fa fa-check"></i><b>4.6.1</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="4-viz.html"><a href="4-viz.html#brief-review-of-the-grammar-of-graphics"><i class="fa fa-check"></i><b>4.7</b> Brief Review of The Grammar of Graphics</a></li>
<li class="chapter" data-level="4.8" data-path="4-viz.html"><a href="4-viz.html#whats-to-come-1"><i class="fa fa-check"></i><b>4.8</b> What’s to come?</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-manip.html"><a href="5-manip.html"><i class="fa fa-check"></i><b>5</b> Manipulating Data</a><ul>
<li class="chapter" data-level="5.1" data-path="5-manip.html"><a href="5-manip.html#five-main-verbs---the-fmv"><i class="fa fa-check"></i><b>5.1</b> Five Main Verbs - The FMV</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-manip.html"><a href="5-manip.html#select-variables-using-select"><i class="fa fa-check"></i><b>5.1.1</b> Select variables using <code>select</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="5-manip.html"><a href="5-manip.html#filter-observations-using-filter"><i class="fa fa-check"></i><b>5.1.2</b> Filter observations using <code id="filter">filter</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="5-manip.html"><a href="5-manip.html#summarize-variables-using-summarize"><i class="fa fa-check"></i><b>5.1.3</b> Summarize variables using <code>summarize</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="5-manip.html"><a href="5-manip.html#create-new-variableschange-old-variables-using-mutate"><i class="fa fa-check"></i><b>5.1.4</b> Create new variables/change old variables using <code>mutate</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="5-manip.html"><a href="5-manip.html#reorder-the-data-frame-using-arrange"><i class="fa fa-check"></i><b>5.1.5</b> Reorder the data frame using <code id="arrange">arrange</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-manip.html"><a href="5-manip.html#the-pipe"><i class="fa fa-check"></i><b>5.2</b> The pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5.3" data-path="5-manip.html"><a href="5-manip.html#joiningmerging-data-frames"><i class="fa fa-check"></i><b>5.3</b> Joining/merging data frames</a></li>
<li class="chapter" data-level="5.4" data-path="5-manip.html"><a href="5-manip.html#whats-to-come-2"><i class="fa fa-check"></i><b>5.4</b> What’s to come?</a></li>
</ul></li>
<li class="part"><span><b>Inference</b></span></li>
<li class="chapter" data-level="6" data-path="6-infer-basics.html"><a href="6-infer-basics.html"><i class="fa fa-check"></i><b>6</b> Inference Basics</a><ul>
<li class="chapter" data-level="6.1" data-path="6-infer-basics.html"><a href="6-infer-basics.html#random-sampling"><i class="fa fa-check"></i><b>6.1</b> Random sampling</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-infer-basics.html"><a href="6-infer-basics.html#tasting-soup"><i class="fa fa-check"></i><b>6.1.1</b> Tasting soup</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-infer-basics.html"><a href="6-infer-basics.html#common-terms"><i class="fa fa-check"></i><b>6.1.2</b> Common terms</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-infer-basics.html"><a href="6-infer-basics.html#simulation"><i class="fa fa-check"></i><b>6.2</b> Simulation</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-infer-basics.html"><a href="6-infer-basics.html#the-p-value"><i class="fa fa-check"></i><b>6.2.1</b> The p-value</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-infer-basics.html"><a href="6-infer-basics.html#bootstrapping"><i class="fa fa-check"></i><b>6.3</b> Bootstrapping</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-infer-basics.html"><a href="6-infer-basics.html#review-of-bootstrapping"><i class="fa fa-check"></i><b>6.3.1</b> Review of Bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-infer-basics.html"><a href="6-infer-basics.html#whats-to-come-3"><i class="fa fa-check"></i><b>6.4</b> What’s to come?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-hypo.html"><a href="7-hypo.html"><i class="fa fa-check"></i><b>7</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="7.1" data-path="7-hypo.html"><a href="7-hypo.html#trial"><i class="fa fa-check"></i><b>7.1</b> Criminal trial analogy</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-hypo.html"><a href="7-hypo.html#two-possible-conclusions"><i class="fa fa-check"></i><b>7.1.1</b> Two possible conclusions</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-hypo.html"><a href="7-hypo.html#basic-logic-of-hypothesis-testing"><i class="fa fa-check"></i><b>7.1.2</b> Basic Logic of Hypothesis Testing</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-hypo.html"><a href="7-hypo.html#statistical-significance"><i class="fa fa-check"></i><b>7.1.3</b> Statistical Significance</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-hypo.html"><a href="7-hypo.html#randomization"><i class="fa fa-check"></i><b>7.2</b> Randomization</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-hypo.html"><a href="7-hypo.html#comparing-action-and-romance-movies"><i class="fa fa-check"></i><b>7.2.1</b> Comparing Action and Romance Movies</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-hypo.html"><a href="7-hypo.html#sampling---randomization"><i class="fa fa-check"></i><b>7.2.2</b> Sampling -&gt; Randomization</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-hypo.html"><a href="7-hypo.html#summary-5"><i class="fa fa-check"></i><b>7.2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-hypo.html"><a href="7-hypo.html#whats-to-come-4"><i class="fa fa-check"></i><b>7.3</b> What’s to come?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-ci.html"><a href="8-ci.html"><i class="fa fa-check"></i><b>8</b> Confidence Intervals</a><ul>
<li class="chapter" data-level="8.1" data-path="8-ci.html"><a href="8-ci.html#relation-to-hypothesis-testing"><i class="fa fa-check"></i><b>8.1</b> Relation to hypothesis testing</a></li>
<li class="chapter" data-level="8.2" data-path="8-ci.html"><a href="8-ci.html#effect-size"><i class="fa fa-check"></i><b>8.2</b> Effect size</a></li>
<li class="chapter" data-level="8.3" data-path="8-ci.html"><a href="8-ci.html#whats-to-come-5"><i class="fa fa-check"></i><b>8.3</b> What’s to come?</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-regress.html"><a href="9-regress.html"><i class="fa fa-check"></i><b>9</b> Simple and Multiple Regression</a><ul>
<li class="chapter" data-level="9.1" data-path="9-regress.html"><a href="9-regress.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>9.1</b> Correlation is not causation</a></li>
<li class="chapter" data-level="9.2" data-path="9-regress.html"><a href="9-regress.html#simple-linear-regression"><i class="fa fa-check"></i><b>9.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="9.3" data-path="9-regress.html"><a href="9-regress.html#mlr"><i class="fa fa-check"></i><b>9.3</b> Multiple linear regression</a></li>
<li class="chapter" data-level="9.4" data-path="9-regress.html"><a href="9-regress.html#types-of-predictors"><i class="fa fa-check"></i><b>9.4</b> Types of predictors</a></li>
<li class="chapter" data-level="9.5" data-path="9-regress.html"><a href="9-regress.html#advanced-topics"><i class="fa fa-check"></i><b>9.5</b> Advanced topics</a></li>
<li class="chapter" data-level="9.6" data-path="9-regress.html"><a href="9-regress.html#whats-to-come-6"><i class="fa fa-check"></i><b>9.6</b> What’s to come?</a></li>
</ul></li>
<li class="part"><span><b>Conclusion</b></span></li>
<li class="chapter" data-level="10" data-path="10-conclusion.html"><a href="10-conclusion.html"><i class="fa fa-check"></i><b>10</b> Concluding Remarks</a></li>
<li class="part"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="11" data-path="11-appendix1.html"><a href="11-appendix1.html"><i class="fa fa-check"></i><b>11</b> Appendix A: Intermediate R</a><ul>
<li class="chapter" data-level="11.1" data-path="11-appendix1.html"><a href="11-appendix1.html#sorted-barplots"><i class="fa fa-check"></i><b>11.1</b> Sorted barplots</a></li>
<li class="chapter" data-level="11.2" data-path="11-appendix1.html"><a href="11-appendix1.html#interactive-graphics"><i class="fa fa-check"></i><b>11.2</b> Interactive graphics</a><ul>
<li class="chapter" data-level="11.2.1" data-path="11-appendix1.html"><a href="11-appendix1.html#interactive-line-graphs"><i class="fa fa-check"></i><b>11.2.1</b> Interactive line-graphs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-appendix2.html"><a href="12-appendix2.html"><i class="fa fa-check"></i><b>12</b> Appendix B: Statistical Basics</a><ul>
<li class="chapter" data-level="12.1" data-path="12-appendix2.html"><a href="12-appendix2.html#basic-statistical-terms"><i class="fa fa-check"></i><b>12.1</b> Basic statistical terms</a><ul>
<li class="chapter" data-level="12.1.1" data-path="12-appendix2.html"><a href="12-appendix2.html#mean"><i class="fa fa-check"></i><b>12.1.1</b> Mean</a></li>
<li class="chapter" data-level="12.1.2" data-path="12-appendix2.html"><a href="12-appendix2.html#median"><i class="fa fa-check"></i><b>12.1.2</b> Median</a></li>
<li class="chapter" data-level="12.1.3" data-path="12-appendix2.html"><a href="12-appendix2.html#standard-deviation"><i class="fa fa-check"></i><b>12.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="12.1.4" data-path="12-appendix2.html"><a href="12-appendix2.html#five-number-summary"><i class="fa fa-check"></i><b>12.1.4</b> Five-number summary</a></li>
<li class="chapter" data-level="12.1.5" data-path="12-appendix2.html"><a href="12-appendix2.html#distribution"><i class="fa fa-check"></i><b>12.1.5</b> Distribution</a></li>
<li class="chapter" data-level="12.1.6" data-path="12-appendix2.html"><a href="12-appendix2.html#outliers"><i class="fa fa-check"></i><b>12.1.6</b> Outliers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-references.html"><a href="13-references.html"><i class="fa fa-check"></i><b>13</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A MODERN DIVE into Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hypo" class="section level1">
<h1><span class="header-section-number">7</span> Hypothesis Testing</h1>
<!-- 
+ Hypothesis testing
    + Distance of flights from NYC to Boston vs flights from NYC to SF.
-->
<!--
+ Idea of histogram of sample being a visual approximation to population distribution.
    + Shiny
+ Standard errors and sampling distribution via randomization
    + Developing traditional inference from randomization
    + two-sample permutation test -> null distribution  
    + Showing what happens when assumptions/conditions aren’t met
    + Then show normal/t-test and show how it fits on top of sampling distribution
    + Shiny Google Forms
-->
<p>We saw some of the main concepts of hypothesis testing introduced in Chapter <a href="6-infer-basics.html#infer-basics">6</a>. We will expand further on these ideas here and also provide a framework for understanding hypothesis tests in general. Instead of presenting you with lots of different formulas and scenarios, we hope to build a way to think about all hypothesis tests. You can then adapt to different scenarios as needed down the road when you encounter different statistical situations.</p>
<p>In a hypothesis test, we will use data from a sample to help us decide between two competing <em>hypotheses</em> about a population. We make these hypotheses more concrete by specifying them in terms of at least one <em>population parameter</em> of interest. We refer to the competing claims about the population as the <strong>null hypothesis</strong>, denoted by <span class="math inline">\(H_0\)</span>, and the <strong>alternative (or research) hypothesis</strong>, denoted by <span class="math inline">\(H_a\)</span>. The roles of these two hypotheses are NOT interchangeable.</p>
<ul>
<li>The claim for which we seek significant evidence is assigned to the alternative hypothesis. The alternative is usually what the experimenter or researcher wants to establish or find evidence for.</li>
<li>Usually, the null hypothesis is a claim that there really is “no effect” or “no difference.” In many cases, the null hypothesis represents the status quo or that nothing interesting is happening.<br />
</li>
<li>We assess the strength of evidence by assuming the null hypothesis is true and determining how unlikely it would be to see sample results as extreme (or more extreme) as those in the original sample.</li>
</ul>
<p>Hypothesis testing brings about many weird and incorrect notions in the scientific community and society at large. One reason for this is that statistics has traditionally been thought of as this magic box of algorithms and procedures to get to results and this has been readily apparent if you do a Google search of “flowchart statistics hypothesis tests”. There are so many different complex ways to determine which test is appropriate.</p>
<p>You’ll see that we don’t need to rely on these complicated series of assumptions and procedures to conduct a hypothesis test any longer. These methods were introduced in a time when computers weren’t powerful. Your cellphone (in 2016) has more power than the computers that sent NASA astronauts to the moon after all. We’ll see that ALL hypothesis tests can be broken down into the following framework given by Allen Downey <a href="http://allendowney.blogspot.com/2016/06/there-is-still-only-one-test.html">here</a>:</p>
<div class="figure" style="text-align: center"><span id="fig:htdowney"></span>
<img src="images/ht.png" alt="Hypothesis Testing Framework" width="\textwidth" />
<p class="caption">
Figure 7.1: Hypothesis Testing Framework
</p>
</div>
<p>Before we hop into this framework, we will provide another way to think about hypothesis testing that may be useful.</p>
<div id="trial" class="section level2">
<h2><span class="header-section-number">7.1</span> Criminal trial analogy</h2>
<p>We can think of hypothesis testing in the same context as a criminal trial in the United States. A criminal trial in the United States is a familiar situation in which a choice between two contradictory claims must be made.</p>
<ol style="list-style-type: decimal">
<li><p>The accuser of the crime must be judged either guilty or not guilty.</p></li>
<li><p>Under the U.S. system of justice, the individual on trial is initially presumed not guilty.</p></li>
<li><p>Only STRONG EVIDENCE to the contrary causes the not guilty claim to be rejected in favor of a guilty verdict.</p></li>
<li><p>The phrase “beyond a reasonable doubt” is often used to set the cutoff value for when enough evidence has been given to convict.</p></li>
</ol>
<p>Theoretically, we should never say “The person is innocent.” but instead “There is not sufficient evidence to show that the person is guilty.”</p>
<p>Now let’s compare that to how we look at a hypothesis test.</p>
<ol style="list-style-type: decimal">
<li><p>The decision about the population parameter(s) must be judged to follow one of two hypotheses.</p></li>
<li><p>We initially assume that <span class="math inline">\(H_0\)</span> is true.</p></li>
<li><p>The null hypothesis <span class="math inline">\(H_0\)</span> will be rejected (in favor of <span class="math inline">\(H_a\)</span>) only if the sample evidence strongly suggests that <span class="math inline">\(H_0\)</span> is false. If the sample does not provide such evidence, <span class="math inline">\(H_0\)</span> will not be rejected.</p></li>
<li><p>The analogy to “beyond a reasonable doubt” in hypothesis testing is what is known as the <strong>significance level</strong>. This will be set before conducting the hypothesis test and is denoted as <span class="math inline">\(\alpha\)</span>. Common values for <span class="math inline">\(\alpha\)</span> are 0.1, 0.01, and 0.05.</p></li>
</ol>
<div id="two-possible-conclusions" class="section level3">
<h3><span class="header-section-number">7.1.1</span> Two possible conclusions</h3>
<p>Therefore, we have two possible conclusions with hypothesis testing:</p>
<ul>
<li>Reject <span class="math inline">\(H_0\)</span><br />
</li>
<li>Fail to reject <span class="math inline">\(H_0\)</span></li>
</ul>
<p>Gut instinct says that “Fail to reject <span class="math inline">\(H_0\)</span>” should say “Accept <span class="math inline">\(H_0\)</span>” but this technically is not correct. Accepting <span class="math inline">\(H_0\)</span> is the same as saying that a person is innocent. We cannot show that a person is innocent; we can only say that there was not enough substantial evidence to find the person guilty.</p>
<p>When you run a hypothesis test, you are the jury of the trial. You decide whether there is enough evidence to convince yourself that <span class="math inline">\(H_a\)</span> is true (“the person is guilty”) or that there was not enough evidence to convince yourself <span class="math inline">\(H_a\)</span> is true (“the person is not guilty”). You must convince yourself (using statistical arguments) which hypothesis is the correct one given the sample information.</p>
<p><strong>Important note:</strong> Therefore, DO NOT WRITE “Accept <span class="math inline">\(H_0\)</span>” any time you conduct a hypothesis test. Instead write “Fail to reject <span class="math inline">\(H_0\)</span>”.</p>
</div>
<div id="basic-logic-of-hypothesis-testing" class="section level3">
<h3><span class="header-section-number">7.1.2</span> Basic Logic of Hypothesis Testing</h3>
<ul>
<li>Take a random sample (or samples) from a population (or two populations)</li>
<li>If the sample data are consistent with the null hypothesis, do not reject the null hypothesis.</li>
<li>If the sample data are inconsistent with the null hypothesis (in the direction of the alternative hypothesis), reject the null hypothesis and conclude that the alternative hypothesis is true (based on the particular sample collected).</li>
</ul>
</div>
<div id="statistical-significance" class="section level3">
<h3><span class="header-section-number">7.1.3</span> Statistical Significance</h3>
<p>The idea that sample results are more extreme than we would reasonably expect to see by random chance if the null hypothesis were true is the fundamental idea behind statistical hypothesis tests. If data as extreme would be very unlikely if the null hypothesis were true, we say the data are <strong>statistically significant</strong>. Statistically significant data provide convincing evidence against the null hypothesis in favor of the alternative, and allow us to generalize our sample results to the claim about the population.</p>
<hr />
<p><strong>Definition: Statistical Significance</strong></p>
<p>When results as extreme as the observed sample statistic are unlikely to occur by random chance alone (assuming the null hypothesis is true), we say the sample results are <em>statistically significant</em>. If our sample is statistically significant, we have convincing evidence against <span class="math inline">\(H_0\)</span> and in favor of <span class="math inline">\(H_a\)</span>. ***</p>
</div>
</div>
<div id="randomization" class="section level2">
<h2><span class="header-section-number">7.2</span> Randomization</h2>
<p>We will now focus on building hypotheses looking at the difference between two population means in an example. We will denote population means using the Greek symbol <span class="math inline">\(\mu\)</span> (pronounced “mu”). Thus, we will be looking to see if one group “out-performs” another group. This is the quite possibly the most common type of statistical inference and serves as a basis for many other types of analyses when comparing two groups.</p>
<p>Our null hypothesis will be of the form <span class="math inline">\(H_0: \mu_1 = \mu_2\)</span>, which can also be written as <span class="math inline">\(H_0: \mu_1 - \mu_2 = 0\)</span>. Our alternative hypothesis will be of the form <span class="math inline">\(H_0: \mu_1 \star \mu_2\)</span> (or <span class="math inline">\(H_a: \mu_1 - \mu_2 \, \star \, 0\)</span>) where <span class="math inline">\(\star\)</span> = <span class="math inline">\(&lt;\)</span>, <span class="math inline">\(\ne\)</span>, or <span class="math inline">\(&gt;\)</span> depending on the context of the problem. You needn’t focus on these new symbols too much at this point. It will just be a shortcut way for us to describe our hypotheses.</p>
<p>As we saw in Chapter <a href="6-infer-basics.html#infer-basics">6</a>, simulation and bootstrapping are valuable tools when conducting inferences based on one population variable. We will see that the process of <strong>randomization</strong>, which is a resampling procedure similar to bootstrapping in some ways will be valuable in conducting tests comparing quantitative values from two groups.</p>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.1)</strong> What is wrong about saying “The defendant is innocent.” based on the US system of criminal trials?</p>
<p><strong>(LC7.2)</strong> What is the purpose of hypothesis testing?</p>
<p><strong>(LC7.3)</strong> What are some flaws with hypothesis testing? How could we alleviate them?</p>
<hr />
<div id="comparing-action-and-romance-movies" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Comparing Action and Romance Movies</h3>
<p>The <code>movies</code> data set in the <code>ggplot2movies</code> package contains information on a large number of movies that have been rated by users of IMDB.com. We are interested in the question here of whether <code>Action</code> movies are rated higher on IMDB than <code>Romance</code> movies. We will first need to do a little bit of data manipulation using the ideas from Chapter <a href="5-manip.html#manip">5</a> to get the data in the form that we would like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2movies)
movies_trimmed &lt;-<span class="st"> </span>movies %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(title, year, rating, Action, Romance)
movies_trimmed</code></pre></div>
<pre><code>## # A tibble: 58,788 × 5
##                       title  year rating Action Romance
##                       &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;   &lt;int&gt;
## 1                         $  1971    6.4      0       0
## 2         $1000 a Touchdown  1939    6.0      0       0
## 3    $21 a Day Once a Month  1941    8.2      0       0
## 4                   $40,000  1996    8.2      0       0
## 5  $50,000 Climax Show, The  1975    3.4      0       0
## 6                     $pent  2000    4.3      0       0
## 7                   $windle  2002    5.3      1       0
## 8                      &#39;15&#39;  2002    6.7      0       0
## 9                       &#39;38  1987    6.6      0       0
## 10                  &#39;49-&#39;17  1917    6.0      0       0
## # ... with 58,778 more rows</code></pre>
<p>Note that <code>Action</code> and <code>Romance</code> are binary variables here. To remove any overlap of movies (and potential confusion) that are both <code>Action</code> and <code>Romance</code>, we will remove them from our <em>population</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_trimmed &lt;-<span class="st"> </span>movies_trimmed %&gt;%
<span class="st">  </span><span class="kw">filter</span>(!(Action ==<span class="st"> </span><span class="dv">1</span> &amp;<span class="st"> </span>Romance ==<span class="st"> </span><span class="dv">1</span>))</code></pre></div>
<p>We will now create a new variable called <code>genre</code> that specifies whether a movie in our <code>movies_trimmed</code> data frame is an <code>&quot;Action&quot;</code> movie, a <code>&quot;Romance&quot;</code> movie, or <code>&quot;Neither&quot;</code>. We aren’t really interested in the <code>&quot;Neither&quot;</code> category here so we will exclude those rows as well. Lastly, the <code>Action</code> and <code>Romance</code> columns are not needed anymore since they are encoded in the <code>genre</code> column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_trimmed &lt;-<span class="st"> </span>movies_trimmed %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">genre =</span> <span class="kw">ifelse</span>(Action ==<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Action&quot;</span>,
                        <span class="kw">ifelse</span>(Romance ==<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Romance&quot;</span>,
                               <span class="st">&quot;Neither&quot;</span>))) %&gt;%
<span class="st">  </span><span class="kw">filter</span>(genre !=<span class="st"> &quot;Neither&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">select</span>(-Action, -Romance)</code></pre></div>
<p>We are left with 8878 movies in our <em>population</em> data set that focuses on only <code>&quot;Action&quot;</code> and <code>&quot;Romance&quot;</code> movies.</p>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.4)</strong> Why are the different genre variables stored as binary variables stored as 1s and 0s instead of just listing the genre as a column of values like “Action”, “Comedy”, etc.?</p>
<p><strong>(LC7.5)</strong> What complications could come above with us excluding action romance movies? Should we question the results of our hypothesis test? Explain.</p>
<hr />
<p>Let’s now visualize the distributions of <code>rating</code> across both levels of <code>genre</code>. Think about what type(s) of plot is/are appropriate here before you proceed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
movies_trimmed %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> genre, <span class="dt">y =</span> rating)) +
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-97"></span>
<img src="ismay_files/figure-html/unnamed-chunk-97-1.png" alt="Rating vs genre in the population" width="\textwidth" />
<p class="caption">
Figure 7.2: Rating vs genre in the population
</p>
</div>
<p>We can see that the middle 50% of ratings for <code>&quot;Action&quot;</code> movies is more spread out than that of <code>&quot;Romance&quot;</code> movies in the population. <code>Romance</code> has outliers at both the top and bottoms of the scale though. We are initially interested in comparing the mean <code>rating</code> across these two groups so a faceted histogram may also be useful:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_trimmed %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> rating)) +
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;dodgerblue&quot;</span>) +
<span class="st">  </span><span class="kw">facet_wrap</span>(~genre)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-98"></span>
<img src="ismay_files/figure-html/unnamed-chunk-98-1.png" alt="Faceted histogram of genre vs rating" width="\textwidth" />
<p class="caption">
Figure 7.3: Faceted histogram of genre vs rating
</p>
</div>
<p><strong>Important note:</strong> Remember that we hardly ever have access to the population values as we do here. This example and the <code>nycflights13</code> data set were used to create a common flow from chapter to chapter. In nearly all circumstances, we’ll be needing to use only a sample of the population to try to infer conclusions about the unknown population parameter values. These examples do show a nice relationship between statistics (where data is usually small and more focused on experimental settings) and data science (where data is frequently large and collected without experimental conditions). We’ll learn more about observational studies and experiments in Chapter <a href="9-regress.html#regress">9</a>.</p>
</div>
<div id="sampling---randomization" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Sampling -&gt; Randomization</h3>
<p>We can use hypothesis testing to investigate ways to determine, for example, whether a <strong>treatment</strong> has an effect over a <strong>control</strong> and other ways to statistically analyze if one group performs better than, worse than, or different than another. We will also use confidence intervals to determine the size of the effect if it exists. You’ll see more on this in Chapter <a href="8-ci.html#ci">8</a>.</p>
<p>We are interested here in seeing how we can use a random sample of action movies and a random sample of romance movies from <code>movies</code> to determine if a statistical difference exists in the mean ratings of each group.</p>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.6)</strong> Define the relevant parameters here in terms of the populations of movies.</p>
<hr />
<p>Let’s select a random sample of 34 action movies and a random sample of 34 romance movies. (The number 34 was chosen somewhat arbitrarily here.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">set.seed</span>(<span class="dv">2016</span>)
movies_genre_sample &lt;-<span class="st"> </span>movies_trimmed %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(genre) %&gt;%
<span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">34</span>)</code></pre></div>
<p>We can now observe the distributions of our two sample ratings for both groups. Remember that these plots should be rough approximations of our population distributions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_genre_sample %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> genre, <span class="dt">y =</span> rating)) +
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-100"></span>
<img src="ismay_files/figure-html/unnamed-chunk-100-1.png" alt="Genre vs rating for our sample" width="\textwidth" />
<p class="caption">
Figure 7.4: Genre vs rating for our sample
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_genre_sample %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> rating)) +
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;dodgerblue&quot;</span>) +
<span class="st">  </span><span class="kw">facet_wrap</span>(~genre)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-101"></span>
<img src="ismay_files/figure-html/unnamed-chunk-101-1.png" alt="Genre vs rating for our sample as faceted histogram" width="\textwidth" />
<p class="caption">
Figure 7.5: Genre vs rating for our sample as faceted histogram
</p>
</div>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.7)</strong> What single value could we change to improve the approximation using the sample distribution on the population distribution?</p>
<hr />
<p>Do we have reason to believe, based on the sample distributions of <code>rating</code> over the two groups of <code>genre</code>, that there is a significant difference between the mean <code>rating</code> for action movies compared to romance movies? It’s hard to say just based on the plots. The boxplot does show that the median sample rating is higher romance movies, but the histogram isn’t as clear. The two groups have somewhat differently shaped distributions but they are both over similar values of <code>rating</code>. It’s often useful to calculate the mean and standard deviation as well conditioned on the two levels.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_ratings &lt;-<span class="st"> </span>movies_genre_sample %&gt;%<span class="st"> </span><span class="kw">group_by</span>(genre) %&gt;%
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(rating),
            <span class="dt">std_dev =</span> <span class="kw">sd</span>(rating))
summary_ratings</code></pre></div>
<pre><code>## # A tibble: 2 × 3
##     genre     mean  std_dev
##     &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1  Action 5.197059 1.464837
## 2 Romance 6.026471 1.202096</code></pre>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.8)</strong> Why did we not specify <code>na.rm = TRUE</code> here as we did in Chapter <a href="5-manip.html#manip">5</a>?</p>
<hr />
<p>We see that the sample mean rating for romance movies, <span class="math inline">\(\bar{x}_{r}\)</span>, is greater than the similar measure for action movies, <span class="math inline">\(\bar{x}_a\)</span>. But is it statistically significantly greater (thus, leading us to conclude that the means are statistically different)? The standard deviation can provide some insight here but with these standard deviations being so similar it’s still hard to say for sure.</p>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.9)</strong> Why might the standard deviation provide some insight about the means being statistically different or not?</p>
<hr />
<p>The hypotheses we specified can also be written in another form to better give us an idea of what we will be simulating to create our null distribution.</p>
<ul>
<li><span class="math inline">\(H_0: \mu_r - \mu_a = 0\)</span></li>
<li><span class="math inline">\(H_a: \mu_r - \mu_a \ne 0\)</span></li>
</ul>
<p>We are, therefore, interested in seeing whether the difference in the sample means, <span class="math inline">\(\bar{x}_r - \bar{x}_a\)</span>, is statistically different than 0. R has a built-in command that can calculate the difference in these two sample means.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean_ratings &lt;-<span class="st"> </span>movies_genre_sample %&gt;%<span class="st"> </span><span class="kw">group_by</span>(genre) %&gt;%
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(rating))
obs_diff &lt;-<span class="st"> </span><span class="kw">diff</span>(mean_ratings$mean)</code></pre></div>
<p>We see here that the <code>diff</code> function calculates <span class="math inline">\(\bar{x}_r - \bar{x}_a = 6.0264706 - 5.1970588 = 0.8294118\)</span>. We will now proceed similarly to how we conducted hypothesis tests in Chapter <a href="6-infer-basics.html#infer-basics">6</a> using simulation. We can look at this from a tactile point of view by using index cards. There are <span class="math inline">\(n_r = 34\)</span> data elements corresponding to romance movies and <span class="math inline">\(n_a = 34\)</span> for action movies. We can write the 34 ratings from our sample for romance movies on one set of 34 index cards and the 34 leniency scores for action movies on another set of 34 index cards. (Note that the sample sizes need not be the same.)</p>
<p>The next step is to put the two stacks of index cards together, creating a new set of 68 cards. If we assume that the two population means are equal, we are saying that there is no association between ratings and genre (romance vs action). We can use the index cards to create two <strong>new</strong> stacks for romance and action movies. First, we must shuffle all the cards thoroughly. After doing so, in this case with equal values of sample sizes, we split the deck in half.</p>
<p>We then calculate the new sample mean rating of the romance deck, and also the new sample mean rating of the action deck. This creates one simulation of the samples. We next want to calculate a statistic from these two samples. Instead of actually doing the calculation using index cards, we can use R as we have before to simulate this process.</p>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.10)</strong> How would the tactile shuffling of index cards change if we had different samples of say 20 action movies and 60 romance movies? Describe each step that would change.</p>
<p><strong>(LC7.11)</strong> Why are we taking the difference in the means of the cards in the new shuffled decks?</p>
<hr />
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(mosaic)
shuffled_ratings &lt;-<span class="st"> </span>movies_trimmed %&gt;%
<span class="st">     </span><span class="kw">mutate</span>(<span class="dt">rating =</span> <span class="kw">shuffle</span>(rating)) %&gt;%<span class="st"> </span>
<span class="st">     </span><span class="kw">group_by</span>(genre) %&gt;%
<span class="st">     </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(rating))
<span class="kw">diff</span>(shuffled_ratings$mean)</code></pre></div>
<pre><code>## [1] -0.02287811</code></pre>
<p>The only new command here is <code>shuffle</code> from the <code>mosaic</code> package, which does what we would expect it to do. It simulates a shuffling of the ratings between the two levels of <code>genre</code> just as we could have done with index cards. We can now proceed in a similar way to what we have done previously in Chapter <a href="6-infer-basics.html#infer-basics">6</a> by repeating this process many times to create a <em>null distribution</em> of simulated differences in sample means.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">many_shuffles &lt;-<span class="st"> </span><span class="kw">do</span>(<span class="dv">10000</span>) *<span class="st"> </span>
<span class="st">  </span>(movies_trimmed %&gt;%
<span class="st">     </span><span class="kw">mutate</span>(<span class="dt">rating =</span> <span class="kw">shuffle</span>(rating)) %&gt;%<span class="st"> </span>
<span class="st">     </span><span class="kw">group_by</span>(genre) %&gt;%
<span class="st">     </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(rating))
   )</code></pre></div>
<p>It is a good idea here to <code>View</code> the <code>many_shuffles</code> data frame via <code>View(many_shuffles)</code>. We need to figure out a way to subtract the first value of <code>mean</code> from the second value of <code>mean</code> for each of the 10,000 simulations. This is a little tricky but the <code>group_by</code> function comes to our rescue here:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rand_distn &lt;-<span class="st"> </span>many_shuffles %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(.index) %&gt;%
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">diffmean =</span> <span class="kw">diff</span>(mean))</code></pre></div>
<p>We can now plot the distribution of these simulated differences in means:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rand_distn %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> diffmean)) +
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">bins =</span> <span class="dv">20</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-107"></span>
<img src="ismay_files/figure-html/unnamed-chunk-107-1.png" alt="Simulated differences in means histogram" width="\textwidth" />
<p class="caption">
Figure 7.6: Simulated differences in means histogram
</p>
</div>
<p>Remember that we are interested in seeing where our observed sample mean difference of 0.8294118 falls on this null distribution. We are interested in simply a difference here so “more extreme” corresponds to values in both tails on the distribution. Let’s shade our null distribution to show a visual representation of our <span class="math inline">\(p\)</span>-value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rand_distn %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> diffmean, <span class="dt">fill =</span> (<span class="kw">abs</span>(diffmean) &gt;=<span class="st"> </span>obs_diff))) +
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">bins =</span> <span class="dv">20</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-108"></span>
<img src="ismay_files/figure-html/unnamed-chunk-108-1.png" alt="Shaded histogram to show p-value" width="\textwidth" />
<p class="caption">
Figure 7.7: Shaded histogram to show p-value
</p>
</div>
<p>You may initially think there is an error here, but remember that the observed difference in means was 0.8294118. It falls far outside the range of simulated differences. We can add a vertical line to represent both it and its negative (since this is a two-tailed test) instead:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rand_distn %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> diffmean)) +
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">bins =</span> <span class="dv">100</span>) +
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> obs_diff, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>) +
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> -obs_diff, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-109"></span>
<img src="ismay_files/figure-html/unnamed-chunk-109-1.png" alt="Histogram with vertical lines corresponding to observed statistic" width="\textwidth" />
<p class="caption">
Figure 7.8: Histogram with vertical lines corresponding to observed statistic
</p>
</div>
<p>Based on this plot, we have evidence supporting the conclusion that the mean rating for romance movies is different from that of action movies. (It doesn’t really matter what significance level was chosen in this case. Think about why.) The next important idea is to better understand just how much higher of a mean rating can we expect the romance movies to have compared to that of action movies. This can be addressed by creating a 95% confidence interval as we will explore in Chapter <a href="8-ci.html#ci">8</a>.</p>
<hr />
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.12)</strong> Conduct the same analysis comparing action movies versus romantic movies using the median rating instead of the mean rating? Make sure to use the <code>%&gt;%</code> as much as possible. What was different and what was the same?</p>
<p><strong>(LC7.13)</strong> What conclusions can you make from viewing the faceted histogram looking at <code>rating</code> versus <code>genre</code> that you couldn’t see when looking at the boxplot?</p>
<p><strong>(LC7.14)</strong> Describe in a paragraph how we used Allen Downey’s diagram to conclude if a statistical difference existed between mean movie ratings for action and romance movies.</p>
<p><strong>(LC7.15)</strong> Why are we relatively confident that the distributions of the sample ratings will be good approximations of the population distributions of ratings for the two genres?</p>
<p><strong>(LC7.16)</strong> What is the value of the <span class="math inline">\(p\)</span>-value for the hypothesis test comparing the mean rating of romance to action movies?</p>
<p><strong>(LC7.17)</strong> Do the results of the hypothesis test match up with the original plots we made looking at the population of movies? Why or why not?</p>
<hr />
</div>
<div id="summary-5" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Summary</h3>
<p>To review, these are the steps one would take whenever you’d like to do a hypothesis test comparing values from the distributions of two groups:</p>
<ul>
<li><p>Simulate many samples using a random process that matches the way the original data were collected and that <em>assumes the null hypothesis is true</em>.</p></li>
<li><p>Collect the values of a sample statistic for each sample to create a <em>randomization distribution</em>.</p></li>
<li><p>Assess the significance of the <em>original</em> sample by determining where its sample statistic lies in the randomization distribution.</p></li>
<li><p>If the proportion of values as extreme or more extreme than the observed statistic in the randomization distribution is smaller than the pre-determined significance level <span class="math inline">\(\alpha\)</span>, we reject <span class="math inline">\(H_0\)</span>. Otherwise, we fail to reject <span class="math inline">\(H_0\)</span>. (If no significance level is given, one can assume <span class="math inline">\(\alpha = 0.05\)</span>.)</p></li>
</ul>
<!--
## Theory-based methods {#theory-hypo} (Put into lab instead)

## Non-rejection of null hypothesis (Put into lab instead)
-->
</div>
</div>
<div id="whats-to-come-4" class="section level2">
<h2><span class="header-section-number">7.3</span> What’s to come?</h2>
<p>This chapter examined how to conclude whether two sample statistics are statistically different. This is the same thing as trying to conclude if the difference in sample statistics is statistically different from zero. We will see that this value of zero plays an important role in confidence intervals as well. We’ll also see in Chapter <a href="8-ci.html#ci">8</a> the relationship between confidence intervals and two-sided hypothesis tests as we worked with in this chapter.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="6-infer-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="8-ci.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ismayc/moderndive/edit/master/07-hypo_tests.Rmd",
"text": null
},
"download": ["ismay.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
